---

---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>qnch</title>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
	</head>
	<body>
		<canvas id="particleCanvas"></canvas>
		<div class="banner">
			<p><a href="https://beta.qnch.network" target="_blank" rel="noopener noreferrer" class="banner-link">Station</a> is now in beta, <button class="banner-link" id="openModal">host your own music</button></p>
		</div>
		<main>
			<div class="description">
				<h3>qnch is a network for musicians and technologists to explore novel ideas in digital music distribution, payment archetypes, and knitting new social fabrics</h3>
			</div>
		</main>
		<dialog id="installDialog">
			<div class="dialog-content">
				<section class="install-section">
					<div class="install-command-wrapper">
						<code class="install-command">curl -fsSL https://qnch.network/install.sh | bash</code>
						<button
							class="copy-button"
							aria-label="Copy install command to clipboard"
							data-copy-text="curl -fsSL https://qnch.network/install.sh | bash"
						>
							Copy
						</button>
					</div>
				</section>
			</div>
		</dialog>
		<footer>
			<a href="https://polkadot.com" target="_blank" rel="noopener noreferrer" class="powered-by">
				<span>Powered by</span>
				<img src="/polkadot-logo.svg" alt="Polkadot" class="polkadot-logo" />
			</a>
		</footer>
	</body>
</html>

<style>
	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
	}

	body {
		background-color: #000;
		color: #fff;
		min-height: 100vh;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		overflow: hidden;
		padding-top: 60px;
	}

	#particleCanvas {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 0;
	}

	.banner {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		background: rgba(0, 0, 0, 0.9);
		backdrop-filter: blur(10px);
		border-bottom: 1px solid rgba(255, 255, 255, 0.1);
		padding: 1rem 2rem;
		text-align: center;
		z-index: 100;
	}

	.banner p {
		margin: 0;
		font-family: sans-serif;
		font-size: 0.95rem;
		opacity: 0.9;
	}

	.banner-link {
		background: none;
		border: none;
		color: #fff;
		text-decoration: underline;
		text-decoration-color: rgba(255, 255, 255, 0.4);
		text-underline-offset: 0.2em;
		cursor: pointer;
		font-family: sans-serif;
		font-size: 0.95rem;
		padding: 0;
		transition: text-decoration-color 0.3s ease;
	}

	.banner-link:hover {
		text-decoration-color: rgba(255, 255, 255, 1);
	}

	main {
		text-align: center;
		position: relative;
		z-index: 1;
	}

	h1 {
		font-family: 'Anton', sans-serif;
		font-size: clamp(4rem, 15vw, 12rem);
		font-weight: 400;
		letter-spacing: -0.05em;
		text-transform: uppercase;
		margin-bottom: 1rem;
	}

	.tagline {
		font-size: clamp(1rem, 2.5vw, 1.5rem);
		opacity: 0.7;
		margin-bottom: 2rem;
		font-weight: 300;
	}

	.description {
		max-width: 600px;
		margin: 2rem auto;
		line-height: 1.6;
		opacity: 0.85;
	}

	.description h3 {
		font-family: 'Anton', sans-serif;
		font-size: clamp(1.2rem, 3vw, 2rem);
		font-weight: 400;
		letter-spacing: -0.02em;
		margin-bottom: 1rem;
	}

	.inline-link {
		color: #fff;
		text-decoration: underline;
		text-decoration-color: rgba(255, 255, 255, 0.4);
		text-underline-offset: 0.2em;
		transition: text-decoration-color 0.3s ease;
	}

	.inline-link:hover {
		text-decoration-color: rgba(255, 255, 255, 1);
	}

	footer {
		position: fixed;
		bottom: 2rem;
		left: 50%;
		transform: translateX(-50%);
		z-index: 1;
		display: none;
	}

	.powered-by {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		color: #fff;
		text-decoration: none;
		opacity: 0.6;
		transition: opacity 0.3s ease;
		font-family: sans-serif;
		font-size: 0.9rem;
		font-weight: 400;
	}

	.powered-by:hover {
		opacity: 1;
	}

	.polkadot-logo {
		height: 20px;
		width: auto;
	}

	@media (max-width: 768px) {
		footer {
			bottom: 1rem;
		}

		.powered-by {
			font-family: sans-serif;
			font-size: 0.8rem;
			font-weight: 400;
		}

		.polkadot-logo {
			height: 16px;
		}
	}

	.install-section {
		max-width: 700px;
		margin: 3rem auto 4rem;
		position: relative;
		z-index: 1;
		text-align: center;
	}

	.install-heading {
		font-family: 'Anton', sans-serif;
		font-size: clamp(1.5rem, 4vw, 2.5rem);
		margin-bottom: 1.5rem;
		opacity: 0.85;
	}

	.install-command-wrapper {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		background: #111;
		border: 1px solid rgba(255, 255, 255, 0.2);
		border-radius: 8px;
		padding: 1rem 1.25rem;
	}

	.install-command {
		flex: 1;
		font-family: 'Courier New', monospace;
		font-size: clamp(0.85rem, 2vw, 1rem);
		color: #fff;
		opacity: 0.85;
		overflow-x: auto;
		white-space: nowrap;
	}

	.copy-button {
		background: rgba(255, 255, 255, 0.1);
		border: 1px solid rgba(255, 255, 255, 0.3);
		color: #fff;
		padding: 0.5rem 1rem;
		border-radius: 4px;
		cursor: pointer;
		transition: all 0.3s ease;
		font-family: sans-serif;
		font-size: 0.9rem;
		white-space: nowrap;
		min-width: 80px;
	}

	.copy-button:hover {
		background: rgba(255, 255, 255, 0.15);
		border-color: rgba(255, 255, 255, 0.5);
	}

	.copy-button:focus {
		outline: 2px solid rgba(255, 255, 255, 0.5);
		outline-offset: 2px;
	}

	.copy-button.copied {
		background: rgba(74, 222, 128, 0.2);
		border-color: #4ade80;
		color: #4ade80;
	}

	@media (max-width: 768px) {
		.install-command-wrapper {
			flex-direction: column;
			align-items: stretch;
			gap: 0.75rem;
		}

		.copy-button {
			width: 100%;
			padding: 0.75rem;
		}

		.banner {
			padding: 0.75rem 1rem;
		}

		.banner p,
		.banner-link {
			font-size: 0.85rem;
		}
	}

	/* Dialog styles */
	dialog {
		position: fixed;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		margin: 0;
		border: none;
		border-radius: 12px;
		background: #000;
		padding: 0;
		max-width: 90vw;
		width: 750px;
		box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
	}

	dialog::backdrop {
		background: rgba(0, 0, 0, 0.85);
	}

	.dialog-content {
		position: relative;
		padding: 1.5rem;
	}

	/* Animation */
	dialog[open] {
		animation: fadeIn 0.3s ease;
	}

	dialog.closing {
		animation: fadeOut 0.3s ease;
	}

	@keyframes fadeIn {
		from {
			opacity: 0;
			transform: translate(-50%, -50%) scale(0.95);
		}
		to {
			opacity: 1;
			transform: translate(-50%, -50%) scale(1);
		}
	}

	@keyframes fadeOut {
		from {
			opacity: 1;
			transform: translate(-50%, -50%) scale(1);
		}
		to {
			opacity: 0;
			transform: translate(-50%, -50%) scale(0.95);
		}
	}

	/* Adjust install section for dialog */
	dialog .install-section {
		margin: 0;
	}
</style>

<script>
	const canvas = document.getElementById('particleCanvas') as HTMLCanvasElement;
	const ctx = canvas.getContext('2d')!;

	let width = window.innerWidth;
	let height = window.innerHeight;

	canvas.width = width;
	canvas.height = height;

	interface Particle {
		x: number;
		y: number;
		baseX: number;
		baseY: number;
		vx: number;
		vy: number;
		size: number;
	}

	const particles: Particle[] = [];
	const mouse = { x: -1000, y: -1000 };
	const mouseRadius = 80;
	const returnSpeed = 0.1;
	const repelForce = 2;

	// Create particles from text
	function createParticles() {
		particles.length = 0;

		// Create temporary canvas for text
		const tempCanvas = document.createElement('canvas');
		const tempCtx = tempCanvas.getContext('2d')!;

		// Calculate font size based on viewport
		const fontSize = Math.min(width * 0.35, 800);
		tempCanvas.width = width;
		tempCanvas.height = height;

		tempCtx.fillStyle = '#fff';
		tempCtx.font = `400 ${fontSize}px Anton, sans-serif`;
		tempCtx.textAlign = 'center';
		tempCtx.textBaseline = 'middle';
		tempCtx.fillText('QNCH', width / 2, height / 2);

		const imageData = tempCtx.getImageData(0, 0, width, height);
		const gap = 3; // Distance between particles

		for (let y = 0; y < height; y += gap) {
			for (let x = 0; x < width; x += gap) {
				const index = (y * width + x) * 4;
				const alpha = imageData.data[index + 3];

				if (alpha > 128) {
					particles.push({
						x,
						y,
						baseX: x,
						baseY: y,
						vx: 0,
						vy: 0,
						size: Math.random() * 2 + 1
					});
				}
			}
		}
	}

	function animate() {
		ctx.clearRect(0, 0, width, height);

		particles.forEach(particle => {
			const dx = mouse.x - particle.x;
			const dy = mouse.y - particle.y;
			const distance = Math.sqrt(dx * dx + dy * dy);

			// Repel particles from mouse
			if (distance < mouseRadius) {
				const angle = Math.atan2(dy, dx);
				const force = (mouseRadius - distance) / mouseRadius;
				particle.vx -= Math.cos(angle) * force * repelForce;
				particle.vy -= Math.sin(angle) * force * repelForce;
			}

			// Return to base position
			const returnDx = particle.baseX - particle.x;
			const returnDy = particle.baseY - particle.y;
			particle.vx += returnDx * returnSpeed;
			particle.vy += returnDy * returnSpeed;

			// Apply velocity with damping
			particle.vx *= 0.85;
			particle.vy *= 0.85;
			particle.x += particle.vx;
			particle.y += particle.vy;

			// Draw particle
			ctx.fillStyle = '#888';
			ctx.fillRect(particle.x - particle.size / 2, particle.y - particle.size / 2, particle.size, particle.size);
		});

		requestAnimationFrame(animate);
	}

	// Mouse move handler
	window.addEventListener('mousemove', (e) => {
		mouse.x = e.clientX;
		mouse.y = e.clientY;
	});

	// Resize handler
	window.addEventListener('resize', () => {
		width = window.innerWidth;
		height = window.innerHeight;
		canvas.width = width;
		canvas.height = height;
		createParticles();
	});

	// Initialize
	createParticles();
	animate();

	// Dialog functionality
	const dialog = document.getElementById('installDialog') as HTMLDialogElement;
	const openModalBtn = document.getElementById('openModal') as HTMLButtonElement;

	// Helper function to close dialog with animation
	function closeDialog() {
		if (!dialog) return;

		dialog.classList.add('closing');

		// Wait for animation to complete, then close
		setTimeout(() => {
			dialog.close();
			dialog.classList.remove('closing');
		}, 300); // Match animation duration
	}

	// Open dialog
	if (openModalBtn && dialog) {
		openModalBtn.addEventListener('click', () => {
			dialog.showModal();
		});
	}

	// Close dialog when clicking backdrop
	if (dialog) {
		dialog.addEventListener('click', (e) => {
			const rect = dialog.getBoundingClientRect();
			const isInDialog = (
				rect.top <= e.clientY &&
				e.clientY <= rect.top + rect.height &&
				rect.left <= e.clientX &&
				e.clientX <= rect.left + rect.width
			);
			if (!isInDialog) {
				closeDialog();
			}
		});
	}

	// Copy to clipboard functionality
	const copyButton = document.querySelector('.copy-button') as HTMLButtonElement;

	if (copyButton) {
		copyButton.addEventListener('click', async () => {
			const textToCopy = copyButton.getAttribute('data-copy-text');

			if (!textToCopy) return;

			try {
				// Modern Clipboard API (works in all modern browsers)
				if (navigator.clipboard && navigator.clipboard.writeText) {
					await navigator.clipboard.writeText(textToCopy);
					showCopySuccess();
				} else {
					// Fallback for older browsers
					fallbackCopy(textToCopy);
				}
			} catch (err) {
				console.error('Failed to copy:', err);
			}
		});
	}

	function showCopySuccess() {
		const button = copyButton;
		const originalText = button.textContent;

		// Update button state
		button.textContent = 'Copied!';
		button.classList.add('copied');
		button.disabled = true;

		// Auto-close dialog after 2 seconds
		setTimeout(() => {
			button.textContent = originalText;
			button.classList.remove('copied');
			button.disabled = false;

			// Close the dialog with animation
			closeDialog();
		}, 2000);
	}

	function fallbackCopy(text: string) {
		// Fallback for browsers that don't support Clipboard API
		const textArea = document.createElement('textarea');
		textArea.value = text;
		textArea.style.position = 'fixed';
		textArea.style.left = '-999999px';
		textArea.style.top = '-999999px';
		document.body.appendChild(textArea);
		textArea.focus();
		textArea.select();

		try {
			document.execCommand('copy');
			showCopySuccess();
		} catch (err) {
			console.error('Fallback copy failed:', err);
		}

		document.body.removeChild(textArea);
	}
</script>
